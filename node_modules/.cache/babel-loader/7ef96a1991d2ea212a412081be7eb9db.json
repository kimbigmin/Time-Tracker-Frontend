{"ast":null,"code":"var _jsxFileName = \"/Users/gimmingyu/Desktop/TimeTracker/Time-Tracker/src/pages/input-page/InputPage.tsx\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport Header from \"../../components/Header/Header\";\nimport InputForm from \"../../components/InputForm/InputForm\";\nimport styled from \"styled-components\";\nimport sumHoursMinutes from \"../../utils/sumTime\";\nimport Calender from \"../../components/Calendar/Calendar\";\nimport { getData } from \"../../utils/getData\";\nimport { minutesToHours } from \"../../utils/minutesToHours\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction InputPage() {\n  _s();\n\n  const [data, setData] = useState(null);\n  const [calender, setCalender] = useState(() => {\n    const thisYear = new Date().getFullYear();\n    const thisMonth = new Date().getMonth() + 1;\n    return `${thisYear}.${thisMonth}`;\n  });\n  const [selectedDate, setSelectedDate] = useState(new Date().getDate());\n  const [finishedDay, setFinishedDays] = useState([]);\n  const [improveTime, setImproveTime] = useState(() => {\n    const newState = {\n      study: \"\",\n      workout: \"\",\n      reading: \"\",\n      rest: \"\"\n    };\n    return newState;\n  });\n  const [privateTime, setPrivateTime] = useState(() => {\n    const newState = {\n      privates: \"\",\n      game: \"\"\n    };\n    return newState;\n  });\n  const [sleepTime, setSleepTime] = useState(() => {\n    const newState = {\n      night: \"\",\n      nap: \"\",\n      wake: \"\",\n      sleep: \"\"\n    };\n    return newState;\n  });\n  const [worksTime, setWorksTime] = useState(() => {\n    const newState = {\n      works: \"\",\n      houseWork: \"\"\n    };\n    return newState;\n  });\n  const [flag, setFlag] = useState(true);\n  const [change, setChange] = useState(false);\n  useEffect(() => {\n    setFlag(current => !current);\n    console.log(flag);\n  }, [change]);\n  useEffect(() => {\n    getData(setData);\n  }, []); // 입력 항목 추출\n\n  const {\n    study,\n    workout,\n    reading,\n    rest\n  } = improveTime;\n  const {\n    privates,\n    game\n  } = privateTime;\n  const {\n    night,\n    nap,\n    wake,\n    sleep\n  } = sleepTime;\n  const {\n    works,\n    houseWork\n  } = worksTime;\n  const entireTime = {\n    entireImprove: minutesToHours(Object.values(improveTime).reduce((acc, val) => acc + sumHoursMinutes(val), 0)),\n    entirePrivate: minutesToHours(Object.values(privateTime).reduce((acc, val) => acc + sumHoursMinutes(val), 0)),\n    entireWorks: minutesToHours(Object.values(worksTime).reduce((acc, val) => acc + sumHoursMinutes(val), 0)),\n    entireSleep: minutesToHours(sumHoursMinutes(sleepTime.night) + sumHoursMinutes(sleepTime.nap))\n  }; // Input 핸들러 컬렉션\n\n  const inputHandlers = {\n    worksHandler(e) {\n      const {\n        value,\n        name\n      } = e.target;\n      setWorksTime({ ...worksTime,\n        [name]: value\n      });\n    },\n\n    sleepHandler(e) {\n      const {\n        value,\n        name\n      } = e.target;\n      setSleepTime({ ...sleepTime,\n        [name]: value\n      });\n    },\n\n    privateHandler(e) {\n      const {\n        value,\n        name\n      } = e.target;\n      setPrivateTime({ ...privateTime,\n        [name]: value\n      });\n    },\n\n    improveHandler(e) {\n      const {\n        value,\n        name\n      } = e.target;\n      setImproveTime({ ...improveTime,\n        [name]: value\n      });\n    }\n\n  };\n\n  const getId = data => {\n    if (data) {\n      return data.map(item => {\n        if (item.date === `${calender}.${selectedDate}`) {\n          return item.id;\n        }\n\n        return \"\";\n      }).join(\"\");\n    }\n  };\n\n  const getFormInfo = async data => {\n    if (data) {\n      const id = await getId(data);\n\n      if (id) {\n        const response = await fetch(`http://localhost:3000/timedata/${id}`);\n        const result = await response.json();\n        await setImproveTime(current => {\n          const newState = { ...current,\n            ...result.improve\n          };\n          return newState;\n        }); // setPrivateTime((current) => {\n        //   const newState = { ...current, ...result.private };\n        //   return newState;\n        // });\n        // setSleepTime((current) => {\n        //   const newState = { ...current, ...result.sleeping };\n        //   return newState;\n        // });\n        // setWorksTime((current) => {\n        //   const newState = { ...current, ...result.working };\n        //   return newState;\n        // });\n\n        console.log(\"실행테스트\");\n      } else {\n        setImproveTime({\n          study: \"\",\n          workout: \"\",\n          reading: \"\",\n          rest: \"\"\n        });\n        setPrivateTime({\n          privates: \"\",\n          game: \"\"\n        });\n        setSleepTime({\n          night: \"\",\n          nap: \"\",\n          wake: \"\",\n          sleep: \"\"\n        });\n        setWorksTime({\n          works: \"\",\n          houseWork: \"\"\n        });\n      }\n    }\n  }; // 폼 제출 핸들러\n\n\n  const submitHandler = async () => {\n    // post할 데이터\n    const timeData = {\n      date: `${calender}.${selectedDate}`,\n      improve: {\n        study,\n        workout,\n        reading,\n        rest\n      },\n      private: {\n        privates,\n        game\n      },\n      sleeping: {\n        night,\n        nap,\n        wake,\n        sleep\n      },\n      working: {\n        works,\n        houseWork\n      },\n      entireTime\n    }; // fetch POST\n\n    await fetch(\"http://localhost:3000/timedata\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(timeData)\n    });\n    await getData(setData);\n    setSelectedDate(selectedDate + 1);\n    console.log(data);\n  };\n\n  const updateHandler = async () => {\n    // post할 데이터\n    const id = await getId(data);\n    const timeData = {\n      date: `${calender}.${selectedDate}`,\n      improve: {\n        study,\n        workout,\n        reading,\n        rest\n      },\n      private: {\n        privates,\n        game\n      },\n      sleeping: {\n        night,\n        nap,\n        wake,\n        sleep\n      },\n      working: {\n        works,\n        houseWork\n      },\n      entireTime\n    }; // fetch POST\n\n    await fetch(`http://localhost:3000/timedata/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(timeData)\n    });\n    await getData(setData);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(InputForm, {\n        handlers: inputHandlers,\n        entireTime: entireTime,\n        submitHandler: submitHandler,\n        selectedDate: selectedDate,\n        calender: calender,\n        updateHandler: updateHandler,\n        finishedDay: finishedDay,\n        improveTime: improveTime,\n        privateTime: privateTime,\n        sleepTime: sleepTime,\n        worksTime: worksTime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Calender, {\n        setChange: setChange,\n        calender: calender,\n        setCalender: setCalender,\n        setSelectedDate: setSelectedDate,\n        selectedDate: selectedDate,\n        data: data,\n        finishedDay: finishedDay,\n        setFinishedDays: setFinishedDays,\n        getFormInfo: getFormInfo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(InputPage, \"I8P65tmq2uKsiod77E8YIDkLbfo=\");\n\n_c = InputPage;\nconst Container = styled.div`\n  display: flex;\n`;\n_c2 = Container;\nexport default InputPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"InputPage\");\n$RefreshReg$(_c2, \"Container\");","map":{"version":3,"sources":["/Users/gimmingyu/Desktop/TimeTracker/Time-Tracker/src/pages/input-page/InputPage.tsx"],"names":["React","useState","useEffect","Header","InputForm","styled","sumHoursMinutes","Calender","getData","minutesToHours","InputPage","data","setData","calender","setCalender","thisYear","Date","getFullYear","thisMonth","getMonth","selectedDate","setSelectedDate","getDate","finishedDay","setFinishedDays","improveTime","setImproveTime","newState","study","workout","reading","rest","privateTime","setPrivateTime","privates","game","sleepTime","setSleepTime","night","nap","wake","sleep","worksTime","setWorksTime","works","houseWork","flag","setFlag","change","setChange","current","console","log","entireTime","entireImprove","Object","values","reduce","acc","val","entirePrivate","entireWorks","entireSleep","inputHandlers","worksHandler","e","value","name","target","sleepHandler","privateHandler","improveHandler","getId","map","item","date","id","join","getFormInfo","response","fetch","result","json","improve","submitHandler","timeData","private","sleeping","working","method","headers","body","JSON","stringify","updateHandler","Container","div"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport Header from \"../../components/Header/Header\";\nimport InputForm from \"../../components/InputForm/InputForm\";\nimport styled from \"styled-components\";\nimport sumHoursMinutes from \"../../utils/sumTime\";\nimport Calender from \"../../components/Calendar/Calendar\";\nimport { getData } from \"../../utils/getData\";\nimport { minutesToHours } from \"../../utils/minutesToHours\";\nimport { OneDate } from \"../../type\";\n\nfunction InputPage() {\n  const [data, setData] = useState(null);\n  const [calender, setCalender] = useState((): string => {\n    const thisYear = new Date().getFullYear();\n    const thisMonth = new Date().getMonth() + 1;\n\n    return `${thisYear}.${thisMonth}`;\n  });\n  const [selectedDate, setSelectedDate] = useState(new Date().getDate());\n  const [finishedDay, setFinishedDays] = useState([]);\n  const [improveTime, setImproveTime] = useState(() => {\n    const newState = {\n      study: \"\",\n      workout: \"\",\n      reading: \"\",\n      rest: \"\",\n    };\n    return newState;\n  });\n  const [privateTime, setPrivateTime] = useState(() => {\n    const newState = {\n      privates: \"\",\n      game: \"\",\n    };\n    return newState;\n  });\n  const [sleepTime, setSleepTime] = useState(() => {\n    const newState = {\n      night: \"\",\n      nap: \"\",\n      wake: \"\",\n      sleep: \"\",\n    };\n    return newState;\n  });\n  const [worksTime, setWorksTime] = useState(() => {\n    const newState = {\n      works: \"\",\n      houseWork: \"\",\n    };\n    return newState;\n  });\n\n  const [flag, setFlag] = useState(true);\n  const [change, setChange] = useState(false);\n  useEffect(() => {\n    setFlag((current) => !current);\n    console.log(flag);\n  }, [change]);\n\n  useEffect(() => {\n    getData(setData);\n  }, []);\n\n  // 입력 항목 추출\n  const { study, workout, reading, rest } = improveTime;\n  const { privates, game } = privateTime;\n  const { night, nap, wake, sleep } = sleepTime;\n  const { works, houseWork } = worksTime;\n\n  const entireTime = {\n    entireImprove: minutesToHours(\n      Object.values(improveTime).reduce(\n        (acc, val) => acc + sumHoursMinutes(val),\n        0\n      )\n    ),\n    entirePrivate: minutesToHours(\n      Object.values(privateTime).reduce(\n        (acc, val) => acc + sumHoursMinutes(val),\n        0\n      )\n    ),\n    entireWorks: minutesToHours(\n      Object.values(worksTime).reduce(\n        (acc, val) => acc + sumHoursMinutes(val),\n        0\n      )\n    ),\n\n    entireSleep: minutesToHours(\n      sumHoursMinutes(sleepTime.night) + sumHoursMinutes(sleepTime.nap)\n    ),\n  };\n\n  // Input 핸들러 컬렉션\n  const inputHandlers = {\n    worksHandler(e: React.ChangeEvent<HTMLInputElement>) {\n      const { value, name } = e.target;\n      setWorksTime({\n        ...worksTime,\n        [name]: value,\n      });\n    },\n    sleepHandler(e: React.ChangeEvent<HTMLInputElement>) {\n      const { value, name } = e.target;\n      setSleepTime({\n        ...sleepTime,\n        [name]: value,\n      });\n    },\n    privateHandler(e: React.ChangeEvent<HTMLInputElement>) {\n      const { value, name } = e.target;\n      setPrivateTime({\n        ...privateTime,\n        [name]: value,\n      });\n    },\n    improveHandler(e: React.ChangeEvent<HTMLInputElement>) {\n      const { value, name } = e.target;\n      setImproveTime({\n        ...improveTime,\n        [name]: value,\n      });\n    },\n  };\n\n  const getId = (data: any) => {\n    if (data) {\n      return data\n        .map((item: OneDate) => {\n          if (item.date === `${calender}.${selectedDate}`) {\n            return item.id;\n          }\n          return \"\";\n        })\n        .join(\"\");\n    }\n  };\n\n  const getFormInfo = async (data: any) => {\n    if (data) {\n      const id = await getId(data);\n      if (id) {\n        const response = await fetch(`http://localhost:3000/timedata/${id}`);\n        const result = await response.json();\n        await setImproveTime((current) => {\n          const newState = { ...current, ...result.improve };\n          return newState;\n        });\n        // setPrivateTime((current) => {\n        //   const newState = { ...current, ...result.private };\n        //   return newState;\n        // });\n        // setSleepTime((current) => {\n        //   const newState = { ...current, ...result.sleeping };\n        //   return newState;\n        // });\n        // setWorksTime((current) => {\n        //   const newState = { ...current, ...result.working };\n        //   return newState;\n        // });\n        console.log(\"실행테스트\");\n      } else {\n        setImproveTime({\n          study: \"\",\n          workout: \"\",\n          reading: \"\",\n          rest: \"\",\n        });\n        setPrivateTime({\n          privates: \"\",\n          game: \"\",\n        });\n        setSleepTime({\n          night: \"\",\n          nap: \"\",\n          wake: \"\",\n          sleep: \"\",\n        });\n        setWorksTime({ works: \"\", houseWork: \"\" });\n      }\n    }\n  };\n\n  // 폼 제출 핸들러\n  const submitHandler = async () => {\n    // post할 데이터\n    const timeData = {\n      date: `${calender}.${selectedDate}`,\n      improve: {\n        study,\n        workout,\n        reading,\n        rest,\n      },\n      private: {\n        privates,\n        game,\n      },\n      sleeping: {\n        night,\n        nap,\n        wake,\n        sleep,\n      },\n      working: {\n        works,\n        houseWork,\n      },\n      entireTime,\n    };\n\n    // fetch POST\n    await fetch(\"http://localhost:3000/timedata\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(timeData),\n    });\n\n    await getData(setData);\n    setSelectedDate(selectedDate + 1);\n    console.log(data);\n  };\n\n  const updateHandler = async () => {\n    // post할 데이터\n    const id = await getId(data);\n    const timeData = {\n      date: `${calender}.${selectedDate}`,\n      improve: {\n        study,\n        workout,\n        reading,\n        rest,\n      },\n      private: {\n        privates,\n        game,\n      },\n      sleeping: {\n        night,\n        nap,\n        wake,\n        sleep,\n      },\n      working: {\n        works,\n        houseWork,\n      },\n      entireTime,\n    };\n    // fetch POST\n    await fetch(`http://localhost:3000/timedata/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(timeData),\n    });\n    await getData(setData);\n  };\n  return (\n    <>\n      <Header />\n      <Container>\n        <InputForm\n          handlers={inputHandlers}\n          entireTime={entireTime}\n          submitHandler={submitHandler}\n          selectedDate={selectedDate}\n          calender={calender}\n          updateHandler={updateHandler}\n          finishedDay={finishedDay}\n          improveTime={improveTime}\n          privateTime={privateTime}\n          sleepTime={sleepTime}\n          worksTime={worksTime}\n        />\n        <Calender\n          setChange={setChange}\n          calender={calender}\n          setCalender={setCalender}\n          setSelectedDate={setSelectedDate}\n          selectedDate={selectedDate}\n          data={data}\n          finishedDay={finishedDay}\n          setFinishedDays={setFinishedDays}\n          getFormInfo={getFormInfo}\n        />\n      </Container>\n    </>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n`;\n\nexport default InputPage;\n"]},"metadata":{},"sourceType":"module"}